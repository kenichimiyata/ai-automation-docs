<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: false, theme: 'default' });

  document.addEventListener('DOMContentLoaded', function () {
    // Jekyll renders ```mermaid as <pre><code class="language-mermaid">
    document.querySelectorAll('pre code.language-mermaid').forEach(function(code) {
      var pre = code.parentNode; // the <pre> element
      var container = document.createElement('div');
      container.className = 'mermaid';
      container.textContent = code.textContent;
      pre.parentNode.replaceChild(container, pre);
    });
    mermaid.run();
  });
</script>
